# 健身菜單推薦系統：模型效能評估報告 (Model Evaluation Report)

本專案旨在開發一個基於人工智慧的健身菜單推薦系統。我們透過比較 **5 種機器學習模型** 與 **隨機分配 (Random Baseline)** 的表現，來評估不同演算法在「個人化菜單分配」上的優劣。

本實驗針對 10000 位具有不同體質數據（體重、肌力上限、年齡等）的虛擬玩家進行測試，並比較各模型所挑選出的菜單之真實效益分數。

## 📊 實驗結果摘要

經過 10000 位玩家的測試，各模型在 100 個候選菜單中挑選最佳解的能力排名如下：

### 🏆 模型效能排行榜 (平均分數)
| 排名 | 模型名稱 (Model) | 平均分數 (Avg Score) | 備註 |
| :---: | :--- | :---: | :--- |
| **1** | **LinearRegression** | **41.04** | 👑 表現最佳，推測因分數計算具備線性特徵 |
| **2** | GradientBoosting | 38.73 | 表現穩定，位居第二 |
| **3** | XGBoost | 38.71 | 強大的梯度提升模型，與 GB 差距極小 |
| **4** | RandomForest | 37.07 | 決策樹集成，穩定性高但略遜於線性模型 |
| **5** | DecisionTree | 29.88 | 單一決策樹，容易過度擬合 (Overfitting) |
| **6** | Random (Baseline) | 27.34 | 隨機分配對照組 |

---

## 🧮 分數計算公式 (Scoring Formula)

本系統的「分數」並非單純指肌肉增加量，而是衡量 **「訓練效率 (Efficiency)」**。我們希望在有限的體力消耗下，獲得最大的肌肉成長。

### 核心概念
分數計算基於 **CP 值 (Cost-Performance Ratio)**，即：

$$
\text{效率 (Efficiency)} = \frac{\text{獲得肌肉量 (Muscle Gain)}}{\text{消耗體力值 (Energy Cost)}}
$$

### 總分計算方式
總分滿分為 **120 分** (6 個部位 x 20 分)。
針對每一個身體部位（胸、背、腿、肩、手、核心），我們計算其實際獲得的效率與該部位理論上「完美效率」的比值。

$$
Score_{total} = \sum_{part \in BodyParts} \left( \frac{ \sum Efficiency_{actual} }{ \sum Efficiency_{ideal} } \times 20 \right)
$$

其中：
* **$Efficiency_{actual}$**：菜單中選定動作的肌肉量總和 / 消耗體力總和。
* **$Efficiency_{ideal}$**：該部位資料庫中所有動作的理論最大效率總和（作為歸一化分母）。
* **BodyParts**：包含 {胸部, 背部, 肩部, 手臂, 腿部, 核心}。

> **意義：** 此公式確保了評分標準的公平性，無論玩家體力高低，能夠選出「最高效率」組合的模型才會獲得高分。

---

## 🔬 實驗方法論 (Methodology)

為了公平比較各模型的能力，我們設計了以下實驗流程：

1.  **資料生成 (Data Generation)**：
    * 使用 `simulate_gen.py` 生成 10,000 筆隨機訓練資料。
    * 資料包含玩家屬性（性別、年齡、各部位最大肌力）以及對應的菜單分數。

2.  **模型訓練 (Training)**：
    * 使用 `train_multi_models.py` 訓練 5 種回歸模型。
    * 輸入特徵 (X)：玩家身體素質 + 菜單動作 (One-Hot Encoding)。
    * 預測目標 (y)：菜單評分。

3.  **效能評估 (Evaluation)**：
    * 生成 100 位未曾見過的測試玩家 (`NumPy Random Seed` 控制)。
    * 為每位玩家生成 **50 份候選菜單 (Candidate Pool)**。
    * 讓每個模型預測這 50 份菜單的分數，並挑選出它認為「最高分」的一份。
    * 計算該份被選中菜單的**真實分數**並進行平均。

## 📈 圖表分析

實驗結果包含以下視覺化圖表 (位於 `report/` 目錄下)：

* **chart_4_boxplot.png (箱形圖)**：
    * 顯示分數的中位數與四分位距。
    * **觀察**：LinearRegression 與 XGBoost 的箱體位置較高，且長度較短，代表表現優異且穩定。下方出現的圓點 (Outliers) 代表在極少數極端體質下，模型未能選出好菜單。
* **chart_3_combined.png (散佈圖)**：
    * 將所有模型的表現疊加，可直觀看出 LinearRegression (橘色線/點) 大多數時間位於 Random (灰色線/點) 之上。

---

## 💡 結論與觀察

1.  **線性模型的勝利**：
    * LinearRegression 取得了最高分 (41.04)。這可能是因為我們的評分公式（加權總和）本質上是一個線性組合問題。對於這類特徵明確、邏輯線性的任務，簡單的線性回歸往往能抓到最核心的數學規律，而不會像決策樹那樣因為過度切分特徵空間而迷失。

2.  **機器學習的有效性**：
    * 即使是表現最差的 Decision Tree (29.88)，其平均分數仍高於隨機分配 (27.34)。
    * 表現最好的模型比隨機分配高出了約 **50% 的效能** (41.04 vs 27.34)，證明了引入 AI 推薦系統能顯著提升訓練效率。

---
*Report generated by AI Comparison Script / 2025*
